<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OSI to TCP/IP Matching</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 40px;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    p.instructions {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 30px;
      font-size: 16px;
    }
    .container {
      display: flex;
      justify-content: space-between;
      max-width: 1000px;
      margin: auto;
      gap: 30px;
    }
    .column {
      flex: 1;
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .column h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    .item {
      background: #e0f7fa;
      padding: 6px 10px;
      margin: 6px 0;
      border-radius: 6px;
      cursor: grab;
      user-select: none;
    }
    .dropzone {
      border: 2px dashed #ccc;
      border-radius: 6px;
      background: #f1f8e9;
      min-height: 60px;
      padding: 8px;
      margin: 6px 0;
    }
    .correct {
      background-color: #c8e6c9 !important;
    }
    .incorrect {
      background-color: #ffcdd2 !important;
    }
    button {
      display: block;
      margin: 30px auto 10px;
      padding: 10px 20px;
      font-size: 16px;
    }
    .score {
      text-align: center;
      font-weight: bold;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>OSI to TCP/IP Matching Activity</h1>
  <p class="instructions">
    Drag each <strong>OSI layer</strong> from the left column into the correct <strong>TCP/IP layer</strong> dropzone on the right. 
    Click <em>Check Answers</em> to see your score, or <em>Reset</em> to try again with shuffled items.
  </p>

  <div class="container">
    <div class="column">
      <h2>OSI Layers</h2>
      <div id="osiLayers"></div>
    </div>

    <div class="column">
      <h2>TCP/IP Layers</h2>
      <div class="label">Application</div><div class="dropzone" data-layer="Application"></div>
      <div class="label">Transport</div><div class="dropzone" data-layer="Transport"></div>
      <div class="label">Internet</div><div class="dropzone" data-layer="Internet"></div>
      <div class="label">Network Access</div><div class="dropzone" data-layer="Network Access"></div>
    </div>
  </div>

  <button onclick="checkAnswers()">Check Answers</button>
  <button onclick="resetActivity()">Reset</button>
  <div class="score" id="score"></div>

  <script>
    const osiToTcp = {
      "Application": "Application",
      "Presentation": "Application",
      "Session": "Application",
      "Transport": "Transport",
      "Network": "Internet",
      "Data Link": "Network Access",
      "Physical": "Network Access"
    };

    const osiLayers = [
      "Application",
      "Presentation",
      "Session",
      "Transport",
      "Network",
      "Data Link",
      "Physical"
    ];

    let draggedItem = null;

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function renderOSI() {
      const container = document.getElementById("osiLayers");
      container.innerHTML = "";
      shuffle(osiLayers).forEach(layer => {
        const div = document.createElement("div");
        div.className = "item";
        div.id = layer;
        div.textContent = layer;
        div.setAttribute("draggable", "true");
        container.appendChild(div);
      });
      setupDragEvents();
    }

    function setupDragEvents() {
      document.querySelectorAll('.item').forEach(item => {
        item.addEventListener('dragstart', () => {
          draggedItem = item;
        });
      });

      document.querySelectorAll('.dropzone').forEach(zone => {
        zone.addEventListener('dragover', e => e.preventDefault());
        zone.addEventListener('drop', e => {
          e.preventDefault();
          if (draggedItem && !zone.contains(draggedItem)) {
            zone.appendChild(draggedItem);
          }
        });
      });
    }

    function checkAnswers() {
      let score = 0;

      document.querySelectorAll('.dropzone').forEach(zone => {
        const tcpLayer = zone.getAttribute('data-layer');
        const items = Array.from(zone.querySelectorAll('.item'));
        items.forEach(i => i.classList.remove('correct', 'incorrect'));

        items.forEach(item => {
          const expected = osiToTcp[item.id];
          if (expected === tcpLayer) {
            item.classList.add('correct');
            score++;
          } else {
            item.classList.add('incorrect');
          }
        });
      });

      document.getElementById('score').innerText = `You matched ${score} out of 7 correctly.`;
    }

    function resetActivity() {
      document.querySelectorAll('.dropzone').forEach(zone => zone.innerHTML = "");
      document.getElementById('score').innerText = "";
      renderOSI();
    }

    window.addEventListener('DOMContentLoaded', () => {
      renderOSI();
    });
  </script>
</body>
</html>
